<html>

<head>
    <title>My first three.js app</title>
    <style>
        body {
            margin: 0;
        }

        canvas {
            width: 100%;
            height: 100%
        }
    </style>
</head>

<body>
    <script src="../build/three.js"></script>
    <script>
        // Physijs 一款物理引擎，可以辅助three.js模拟物理现象，比如重力下落、物体碰撞等  https://github.com/chandlerprall/Physijs
        // stats.js 渲染性能性能监控器，查看Threejs渲染帧率FPS  https://github.com/mrdoob/stats.js
        // dat.gui 轻量UI交互库  https://github.com/dataarts/dat.gui
        // tween.js 借助tween.js快速创建补间动画  https://github.com/tweenjs/tween.js/
        // ThreeBSP 模型布尔运算   https://github.com/sshirokov/ThreeBSP

        // 场景
        var scene = new THREE.Scene();
        // 相机
        var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        // 渲染器
        var renderer = new THREE.WebGLRenderer();

        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);
        var spriteMap = new THREE.TextureLoader().load('../assets/img/happy.png');
        scene.background = new THREE.Color( 0xf0f0f0 );
        // 光源 
        scene.add(new THREE.AmbientLight(0xf0f0f0));
        const light = new THREE.SpotLight(0xffffff, 1.5);
        light.position.set(0, 1500, 200);
        light.angle = Math.PI * 0.2;
        light.castShadow = true;
        light.shadow.camera.near = 200;
        light.shadow.camera.far = 2000;
        light.shadow.bias = - 0.000222;
        light.shadow.mapSize.width = 1024;
        light.shadow.mapSize.height = 1024;
        scene.add(light);

        // mesh
        var geometry = new THREE.BoxGeometry(1, 1, 1);
        // 材质
        var material = new THREE.MeshBasicMaterial({ map: spriteMap });
        // 正方体
        var cube = new THREE.Mesh(geometry, material);
        scene.add(cube);
        scene.add(light);



        // var spriteMaterial = new THREE.SpriteMaterial({ map: spriteMap, color: 0xffffff });

        // var sprite = new THREE.Sprite(spriteMaterial);
        // sprite.scale.set(2, 2, 1)
        // sprite.position.set(0, 2, 1)

        // scene.add( sprite );

        camera.position.z = 5;

        var animate = function () {
            requestAnimationFrame(animate);

            cube.rotation.x += 0.01;
            cube.rotation.y += 0.02

            renderer.render(scene, camera);
        };

        animate();
    </script>
</body>

</html>