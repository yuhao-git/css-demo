import{g as c,h as r,i as p,j as d,o as u,e as m,a as f,c as v}from"./index.ab8274cf.js";class g{constructor(t,i){this.puppleArr=new Array,this.puppleNum=500,this.canvas=t,this.context=t.getContext("2d"),this.isDisposed=!1,this.timer=null;for(let a=0;a<this.puppleNum;a++)this.puppleArr.push(this.genPupple());this.shake()}dispose(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.isDisposed=!0}genPupple(){let t=Math.random()*5+5;return{radius:t,v:Math.random()*20+10,r:Math.random()*255|0,g:Math.random()*255|0,b:Math.random()*255|0,a:Math.random()+.3,angle:-Math.PI*Math.random(),x:Math.random()*this.canvas.width,y:this.canvas.height-t*2,isChangeAlpha:Math.random()>.5,isChangeRadius:Math.random()>.5}}shake(){let t=this.context,i=()=>{t.clearRect(0,0,this.canvas.width,this.canvas.height);for(let a=0;a<this.puppleNum;a++){let e=this.puppleArr[a];t.fillStyle="rgba("+e.r+","+e.g+","+e.b+","+e.a+")",t.beginPath(),t.arc(e.x,e.y,e.radius,0,360,!1),t.fill(),t.closePath(),e.x+=e.v*Math.cos(e.angle)*.03,e.y+=e.v*Math.sin(e.angle)*.4,e.isChangeRadius&&(e.radius-=.01),e.a-=Math.random()*.01,(e.a<=0||e.radius<=0||e.y<0)&&(this.puppleArr[a]=this.genPupple())}if(this.isDisposed){cancelAnimationFrame(this.timer),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.timer=null,this.canvas=null,this.puppleArr=null;return}this.timer=requestAnimationFrame(i)};i()}}const _=c({__name:"particle",setup(h){let t=r(null),i=r(null),a=r(null);function e(){l(),t=new g(i.value)}function n(){let s=a.value.clientWidth,o=a.value.clientHeight;i.value.width=s,i.value.height=o,e()}function l(){var s;(s=t==null?void 0:t.dispose)==null||s.call(t),t=null}return p(()=>{window.addEventListener("resize",n),n()}),d(()=>{window.removeEventListener("resize",n),l()}),(s,o)=>(u(),m("div",{ref_key:"container",ref:a,class:"h-full w-full"},[f("canvas",{id:"cns1",ref_key:"canvas",ref:i,width:"200",height:"300"},null,512)],512))}}),w=c({__name:"index",setup(h){return(t,i)=>(u(),v(_))}});export{w as default};
